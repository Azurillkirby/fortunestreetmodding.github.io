<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Fortune Street Address Converter</title>
	<style>
		body {
  			font-family: Arial, sans-serif;
		}
		table.normal {
			width: 100%;
			max-width: 40em;
			margin: auto;
			table-layout: fixed;
		}
		table tr { border-bottom:1px solid #e9e9e9; }
		table tr td, th { border:1px solid #D5D5D5; padding:1px; }
		table textarea:hover { background: #fcfcfc; }
	</style>
<script src="addressConverter.js"></script>
<script type="text/javascript">
function init() {
	const setAddress = function(input, address) {
		if(address) {
			input.style.backgroundColor = "";
			input.value = address.toString(16);
		} else {
			input.style.backgroundColor = "red";
		}
		return address;
	}
	const inputHandler = function(e) {
		e.target.style.backgroundColor = "";
		address = parseInt(e.target.value, 16);
		switch(e.target) {
			case fsvirt_input:
				fsvirt = address;
				bsvirt = setAddress(bsvirt_input, bsvirt_to_fsvirt.inverseMap(fsvirt));
				setAddress(fsfile_input, fsvirt_to_fsfile.map(fsvirt));
				setAddress(bsfile_input, bsvirt_to_bsfile.map(bsvirt));
				break;
			case bsvirt_input:
				bsvirt = address;
				fsvirt = setAddress(fsvirt_input, bsvirt_to_fsvirt.map(bsvirt));
				setAddress(fsfile_input, fsvirt_to_fsfile.map(fsvirt));
				setAddress(bsfile_input, bsvirt_to_bsfile.map(bsvirt));
				break;
			case fsfile_input:
				fsfile = address;
				fsvirt = setAddress(fsvirt_input, fsvirt_to_fsfile.inverseMap(fsfile));
				bsvirt = setAddress(bsvirt_input, bsvirt_to_fsvirt.inverseMap(fsvirt));
				setAddress(bsfile_input, bsvirt_to_bsfile.map(bsvirt));
				break;
			case bsfile_input:
				bsfile = address;
				bsvirt = setAddress(bsvirt_input, bsvirt_to_bsfile.inverseMap(bsfile));
				fsvirt = setAddress(fsvirt_input, bsvirt_to_fsvirt.map(bsvirt));
				setAddress(fsfile_input, fsvirt_to_fsfile.map(fsvirt));
				break;
		}
	}
	const fsvirt_input = document.getElementById('fsvirt_input');
	const bsvirt_input = document.getElementById('bsvirt_input');
	const fsfile_input = document.getElementById('fsfile_input');
	const bsfile_input = document.getElementById('bsfile_input');
	fsvirt_input.addEventListener('input', inputHandler);
	bsvirt_input.addEventListener('input', inputHandler);
	fsfile_input.addEventListener('input', inputHandler);
	bsfile_input.addEventListener('input', inputHandler);
}
</script>
</head>
<body onload="init()">
	<table class="normal">
		<tr><td>Fortune Street Virtual</td><td><input type="text" id="fsvirt_input"/></td><td>Boom Street Virtual</td><td><input type="text" id="bsvirt_input"/></td></tr>
		<tr><td>Fortune Street File</td><td><input type="text" id="fsfile_input"/></td><td>Boom Street File</td><td><input type="text" id="bsfile_input"/></td></tr>
	</table>
</body>
</html>

